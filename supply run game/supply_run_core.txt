--@name Supply Run Core
--@author Lil'Tugboat
--@shared

if SERVER then
    wire.adjustOutputs({"Locations", "Shops"}, {"array", "array"})
    chips = {}
    chips = find.all(function(e) 
        return e:getOwner() == owner() and e:getClass() == "starfall_processor" and string.startWith(e:getChipName(), "Supply Run") and  e != chip()

    end)
--[[
    
    links = {}    
    for key, value in pairs(chips) do
        table.insert(links, wire.getWirelink(value))
    end
]]
    
    
    
    local locations = {}
    local shops = {}
    for key, chip in pairs(chips) do
        if chip:getChipName() == "Supply Run Dropoff" then
            table.insert(locations, chip)
        elseif chip:getChipName() == "Supply Run Shop" then
            table.insert(shops, chip)
        else
            print(chip)
        end
    end 
    wire.ports.Locations = locations
    wire.ports.shops = shops
end

--[[
Starfall Scripting Environment

StarfallEx Addon: https://github.com/thegrb93/StarfallEx
Documentation: http://thegrb93.github.io/StarfallEx

This default code can be edited via the 'default.txt' file
]]
