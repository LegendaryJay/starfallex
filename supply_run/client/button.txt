--@name Button
--@author Lil'Tugboat
--@shared

local button = class("Button")

function button:initialize(text)
    self.x = 0
    self.y = 0
    self.w = 0
    self.h = 0
    self.cx = 0
    self.cy = 0
    self.text = text or ""
    self.pressed = false
    self.hovered = false
    self.baseColor = Color(0, 60, 60)
    self.hoverColor = Color(0, 120, 120) 
    self.pressColor = Color(0, 180,  180)
    self.buttonShadowColor = Color(0, 40, 40)
    self.textColor = Color(200,250,250)
end

function button:setButton(x, y, w, h, text)
    self.x = x or 0
    self.y = y or 0
    self.w = w or 0
    self.h = h or 0
    self.text = text or self.text or ""
end

function button:isHovered(cx, cy)
    return cx and cx > self.x and cx < self.x + self.w and cy > self.y and cy < self.y + self.h
end

function button:draw()
    local bgColor = self.baseColor
    if self.pressed then
        bgColor = self.pressColor
    elseif self.hovered then
        bgColor = self.hoverColor
    end
    
    pressedOffset = self.pressed and 0 or 1
    
    --draw button  shadow
    render.setColor(self.buttonShadowColor)
    render.drawRect(self.x, self.y, self.w, self.h)
    --draw button
    render.setColor(bgColor)
    render.drawRect(self.x - pressedOffset, self.y - pressedOffset, self.w, self.h)       
    -- Draw Button Lable
    render.setColor(self.textColor)
    render.drawSimpleText(self.x + self.w * 0.5 - pressedOffset, self.y + self.h * 0.5 - pressedOffset, self.text, TEXT_ALIGN.CENTER, TEXT_ALIGN.CENTER)
end

function button:update()
    cx, cy = render.cursorPos()
    self.hovered = self:isHovered(cx, cy)
end