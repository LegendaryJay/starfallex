--@name Spawn Shop Screen Class
--@include https://raw.githubusercontent.com/Jacbo1/Public-Starfall/main/SafeNet/safeNet.lua as SafeNet
--@server
local net = require("SafeNet")
local ShopScreen = class("ShopScreen")
function ShopScreen:initialize(name, entity, controller)
    self.type = "ShopScreen"
    self.name = name
    self.entity = entity
    self.products = {}
    self.controller = controller
    
    
    net.receive("screenRequest_" .. self.entity:entIndex(), function(_, ply)
        net.start("screenInfo")
            item = self.controller:getProductData(self.name)
            net.writeTable(item)   
            net.writeString(self.name)   
        net.send(ply)
    end)

    controller:addEntityInfo(self)
    return self
end
function ShopScreen.create(name, pos, ang, mdl, controller)
    screen = prop.createComponent(pos, ang, "starfall_screen", mdl, true)
    screen:linkComponent(chip())
    return ShopScreen:new(name, screen, controller)
end

return ShopScreen