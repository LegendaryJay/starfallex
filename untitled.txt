--@name Untitled
--@client

-- Function to send the save table of the currently equipped weapon
--[[
    local function sendWeaponSaveTable(ply)
        local weapon = ply:getActiveWeapon()
        if weapon:isValid() then
            local saveTable = weapon:getSaveTable(true)
            local keys = table.getKeys(saveTable)
    
            -- Sending each key-value pair one at a time
            local function sendNextRow(index)
                if index <= #keys then
                    local key = keys[index]
                    local value = saveTable[key]
    
                    -- Debugging: Print the key and value being sent
                    print("Sending:", key, value)
    

    
                    -- Schedule the next row to be sent after a short delay
                    timer.simple(0.5, function()
                        sendNextRow(index + 1)
                    end)
                end
            end
    
            -- Start sending rows from the first index
            sendNextRow(1)
        else
            print("No valid weapon equipped.")
        end
    end
]]
    
    -- Listen for the key press
    hook.add("think", "HandleReloadKeyPress", function(ply, key)
        print("anything")
--[[
        if key == IN_KEY.RELOAD then
            print("R")
            sendWeaponSaveTable(ply)
            --hook.remove("KeyPress", "HandleReloadKeyPress")
        end
]]
    end)